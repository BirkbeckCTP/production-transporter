{% extends "admin/core/base.html" %}
{% load foundation files %}

{% block page_title %}Production Transporter #{{ article.pk }}{% endblock page_title %}
{% block title %}Production Transporter #{{ article.pk }}{% endblock %}

{% block body %}
    <div class="box">
        <div class="title-area">
            <h2>Files to Transport</h2>
            <a class="button" href="{% url 'production_transporter_handshake_url' %}">< Back</a>
        </div>
        <div class="content">
            <p>
                {{ file_text|safe }}
            </p>
            <form method="POST">
                {% csrf_token %}
                {% include "admin/elements/forms/errors.html" %}
                <table class="table small">
                    <thead>
                        <tr>
                            <td></td>
                            <th>ID</th>
                            <th>Label</th>
                            <th>Original Filename</th>
                            <th>Type</th>
                            <th>Date Uploaded</th>
                            <th>Date Updated</th>
                            <th>Owner</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for file in files %}
                        <tr>
                            <td><input type="checkbox" name="files" value="{{ file.pk }}" id="id_files_{{ file.pk }}" {% if file in article.transportfiles.files.all %}checked="checked"{% endif %}></td>
                            <td>{{ file.pk }}</td>
                            <td><label for="id_files_{{ file.pk }}">{{ file.label|default_if_none:"No Label" }}</label></td>
                            <td>{{ file.original_filename }}</td>
                            <td>{% file_type article file %}</td>
                            <td>{{ file.date_uploaded }}</td>
                            <td>{{ file.last_modified }}</td>
                            <td>{{ file.owner }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% if article.transportfiles %}
                <button name="save" class="button warning">Save</button>
                {% endif %}
                <button name="save_and_send" class="button info">Save & FTP Files</button>
            </form>
        </div>
    </div>
{% endblock body %}